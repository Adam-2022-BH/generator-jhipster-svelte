module.exports = {
	testEnvironment: 'jsdom',
	transform: {
		'^.+\\.js$': 'babel-jest',
		'^.+\\.svelte$': 'svelte-jester',
	},
	testMatch: ['<rootDir>/(<%= CLIENT_MAIN_SRC_DIR %>**/*.spec.js)'],
	transformIgnorePatterns: ['node_modules/(?!fa-svelte)'],
	moduleFileExtensions: ['js', 'svelte'],
	moduleNameMapper: {
		'^\\$lib(.*)$': '<rootDir>/<%= CLIENT_MAIN_SRC_DIR %>app/lib$1',
	},
	setupFilesAfterEnv: ['@testing-library/jest-dom/extend-expect'],
	resolver: 'jest-svelte-resolver',
	coverageDirectory: '<rootDir>/<%= BUILD_DIR %>jest-coverage/',
	cacheDirectory: '<rootDir>/<%= BUILD_DIR %>jest-cache',
	reporters: [
		'default',
		[
			'jest-junit',
			{
				outputDirectory: './<%= BUILD_DIR %>test-results/jest',
				outputName: 'TESTS-results-sonar.xml',
			},
		],
		[
			'jest-sonar',
			{
				outputDirectory: '<%= BUILD_DIR %>test-results/jest',
				outputName: 'TESTS-results-sonar.xml',
				reportedFilePath: 'relative',
			},
		],
	],
}
